
import yang.data
import y_testy

def service1():
    root = y_testy.y_testy()
    root.c1.l1 = "a leaf written by service1"
    root.c1.c2.l3 = "also set by service1"

    e1 = root.c1.list1.create("bajs")
    e1.l5 = "set by service1"

    return root.to_gdata()

def service2():
    mod = y_testy.y_testy()
    mod.c1.l2 = "set by service2"
    mod.c1.c2.l4 = "set by service2"

    e1 = mod.c1.list1.create("shit")
    e1.l5 = "set by service2"

    return mod.to_gdata()

#def service3():
#    mod = y_testy.y_testy(
#        c1 = y_testy.y_testy_c1(
#            l2 = "set by service3",
#            c2 = y_testy.y_testy_c1_c2(
#                l4 = "set by service3"
#            )
#        ),
#        list1 = [
#            y_testy.y_testy_list1_element(....)
#        ]
#
#    )
#    return mod.to_gdata()


actor main(env):
    data1 = service1()
    data2 = service2()
    merged_config = yang.data.merge(data1, data2)
    print(merged_config.to_xmlstr())
    env.exit(0)
